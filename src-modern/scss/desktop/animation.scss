/* desktop */

// Modern animations keyframes
@include keyframes(jump){
  0% { @include transform(translate(0, 80%)); }
  50% { @include transform(translate(0, -8px)); }
  100% { @include transform(translate(0, 0)); }
}

@include keyframes(ab_enter) {
  from {
    @include opacity(0);
    @include transform(rotate(95deg) translate(20%, 0) scale(1.1));
  }

  to {
    @include opacity(0.8);
    @include transform(rotate(0deg) translate(0, 0));
  }
}

// Modern slide-up panel animation (Intercom-style)
@include keyframes(slide-up) {
  from {
    @include transform(translateY(100%));
    @include opacity(0);
  }
  to {
    @include transform(translateY(0));
    @include opacity(1);
  }
}

// Modern message bubble fade-in
@include keyframes(message-fade-in) {
  from {
    @include opacity(0);
    @include transform(translateY(10px));
  }
  to {
    @include opacity(1);
    @include transform(translateY(0));
  }
}

// Typing indicator pulse animation
@include keyframes(typing-pulse) {
  0%, 60%, 100% {
    @include opacity(0.4);
    @include transform(scale(0.8));
  }
  30% {
    @include opacity(1);
    @include transform(scale(1));
  }
}

// Quick reply chip hover animation
@include keyframes(chip-hover) {
  from {
    @include transform(scale(1));
    @include box-shadow(0px 2px 4px 0px rgba(0, 0, 0, 0.1));
  }
  to {
    @include transform(scale(1.02));
    @include box-shadow(0px 4px 8px 0px rgba(0, 0, 0, 0.15));
  }
}

#livesite_action_buttons {

  .ls-action {
    @include opacity(0);

    span {
      display: none\9;
      @include transform-origin(100%, 0);
      @include opacity(0);
      @include transform(scale(0, 1) translate(100%, 0));
      @include transition(all 0.25s ease-in-out);
    }
  }

  &.ls-animate-enter {

    .ls-action {
      @include transition(all 0.7s);
      @include transform(rotate(95deg) translate(0, -20%) scale(1.2));

      @for $i from 1 through 10 {

        &:nth-of-type(#{$i}) {
          @include transition-delay(($i*0.1)+s);
        }
      }
    }
  }

  &.ls-animate-hover {

    .ls-action {
      @include transition-delay(0s !important);
      @include transition(all 0.15s);

      &:before {
        @include transition-delay(0s !important);
      }

      &:hover {
        @include opacity(1);
        @include transform(scale(1.15));

        span {
          display: block\9;
          @include transform(scale(0.85) translate(0, 0));
          @include opacity(1);
        }
      }
    }
  }

  &.ls-visible {

    .ls-action {
      @include opacity(0.95);
      @include transform(rotate(0deg) translate(0, 0) scale(1));
    }
  }

  .ls-counter {
    width: 0;
    @include opacity(0);
    @include transform(scale(0));

    &.ls-animate-enter {
      @include transition(opacity 0.25s, transform 0.25s);
    }

    &.ls-visible {
      width: auto;
      @include opacity(1);
      @include transform(scale(1));
    }
  }
}

#livesite_engage_button {
  display: none\9;
  bottom: -47px;
  @include opacity(0);

  &.ls-animate-enter {
    @include transition(opacity 0.5s, bottom 0.4s);
    @include transition-delay(0.15s);
  }

  &.ls-visible {
    display: block\9;
    bottom: 0;
    @include opacity(1);
    @include transition-delay(0s);
  }
}

#livesite_active_engage {
  // initial state of css
  display: none\9;
  @include transform(scaleX(0.7) translate(0, 110%));

  .ls-ae {
    @include opacity(0);
  }

  .ls-inline-actions {

    .ls-action {
      @include opacity(0);

      &:before {
        @include opacity(0);
      }
    }
  }

  // end state of the css - Modern slide-up animation
  &.ls-animate-enter {
    @include animation(slide-up 0.4s cubic-bezier(0.16, 1, 0.3, 1)); // Modern: smooth slide-up with easing

    .ls-ae {
      @include transition(all 0.35s ease 0.2s);
    }

    .ls-content > * {
      @include animation(message-fade-in 0.3s ease 0.2s); // Modern: message fade-in instead of jump
    }

    .ls-inline-actions {

      .ls-action {
        @include transition(all 0.5s);

        &:before {
          @include transition(all 0.5s);
          @include transform(scale(1.5) rotate(-75deg) translate(-25%, 0%));
        }
      }

      .ls-actions-C > .ls-action {

        &:nth-of-type(1) {
          @include transition-delay(0.15s);

          &:before {
            @include transition-delay(0.20s);
          }
        }

        &:nth-of-type(2) {
          @include transition-delay(0.25s);

          &:before {
            @include transition-delay(0.30s);
          }
        }

        &:nth-of-type(3) {
          @include transition-delay(0.35s);

          &:before {
            @include transition-delay(0.40s);
          }
        }

        &:nth-of-type(4) {
          @include transition-delay(0.45s);

          &:before {
            @include transition-delay(0.50s);
          }
        }
      }

      .ls-more-actions-C > .ls-action {
        @include transition-delay(0.45s);

        &:before {
          @include transition-delay(0.50s);
        }
      }

      .ls-profile-action .ls-action {
        @include transition-delay(0.55s);

        &:before {
          @include transition-delay(0.60s);
        }
      }
    }
  }

  &.ls-animate-hover {

    .ls-action {
      @include transition-delay(0s !important);

      &:before {
        @include transition-delay(0s !important);
      }
    }

    .ls-inline-actions .ls-action {

      @include transition(all 0.2s);

      &:hover,
      &:hover:after {
        @include transform(scale(1.1));
      }

      &:active,
      &:active:after {
        @include transform(scale(0.97));
        @include opacity(0.8);
      }
    }

    .ls-more-actions-C {
      @include transition(color 0.25s);
    }

    .ls-tooltip-menu {
      @include transition(opacity 0.5s);
    }
  }

  &.ls-visible {
    display: block\9;
    @include transform(scaleX(1) translate(0, 0));

    .ls-ae {
      @include opacity(1);
    }

    .ls-inline-actions .ls-action {
      @include opacity(1);

      &:before {
        @include transform(rotate(0deg) translate(0, 0));
        @include opacity(1);
      }
    }
  }

  .ls-counter {
    width: 0;
    @include opacity(0);
    @include transform(scale(0));

    &.ls-animate-enter {
      @include transition(opacity 0.25s, transform 0.25s);
    }

    &.ls-visible {
      width: auto;
      @include opacity(1);
      @include transform(scale(1));
    }
  }

  // general inside css animations/effects
  .ls-close {
    @include opacity(0.7);
    @include transition(opacity 0.25s);

    &:hover {
      @include opacity(1);
    }
  }

  .ls-main-action {
    @include transition(all .2s);

    &:before {
    }

    &:hover {
      @include opacity(0.95);
    }
  }

  .ls-actions-C {

    .ls-action,
    .ls-more-actions {
    }

    .ls-more-actions-C {
    }
  }

  .ls-action {

    &:before {
    }

    &.ls-my-account {

      span {
      }

      &:before {
      }

      .ls-counter {
      }
    }

    &.ls-more-actions {

      &:before{
      }
    }
  }

  .ls-profile-action {

    .ls-my-account {
    }
  }

  .ls-tooltip-menu {
    display: none\9;
    @include opacity(0);
    // @include transform-origin(100%,100%);
    @include transform(scale(0));
    z-index: -1;
  }

  .ls-more-actions-C:hover {

    .ls-tooltip-menu {
      display: block\9;
      @include opacity(1);
      @include transform(scale(1));
      z-index: 0;
    }
  }
}

#livesite_engage_button,
#livesite_action_buttons {

  .ls-welcome-box {
    @include opacity(0);
    @include transform(scale(0));

    &.ls-animate-enter {
      @include transition(opacity 0.4s ease, transform 0.4s ease); // Modern: smoother transition
    }

    &.ls-visible {
      @include opacity(1);
      @include transform(scale(1));
    }
  }
}

// Modern chat message bubble animations
.ls-chat-message {
  @include animation(message-fade-in 0.3s ease);
}

// Modern typing indicator
.ls-typing-indicator {
  .ls-typing-dot {
    @include animation(typing-pulse 1.4s infinite);
    
    &:nth-child(2) {
      animation-delay: 0.2s;
    }
    
    &:nth-child(3) {
      animation-delay: 0.4s;
    }
  }
}

// Modern quick reply chip hover
.ls-quick-reply-chip {
  transition: all 0.2s ease;
  
  &:hover {
    @include animation(chip-hover 0.2s ease forwards);
  }
}
